A functional approach to the breadth-first

