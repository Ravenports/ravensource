DEF[PORTVERSION]=	25.0.0
DEF[XNAME]=		driver-video-amdgpu
DEF[ALTNAME]=		xf86-video-amdgpu
# ----------------------------------------------------------------------------

NAMEBASE=		xorg-${XNAME}
VERSION=		${PORTVERSION}
KEYWORDS=		x11_drivers
VARIANTS=		std
SDESC[std]=		X.org amdgpu video driver
HOMEPAGE=		https://www.x.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		XORG/individual/driver
DISTFILE[1]=		${ALTNAME}-${PORTVERSION}.tar.xz:main

SPKGS[std]=		set primary man

OPTIONS_AVAILABLE=	UDEV
OPTIONS_STANDARD=	UDEV
OPT_ON[dragonfly]=	UDEV
OPT_ON[freebsd]=	UDEV
OPT_ON[linux]=		UDEV
OPT_ON[midnightbsd]=	UDEV

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		x11-drivers/xf86-video-amdgpu

NOT_FOR_ARCH=		aarch64

BUILD_DEPENDS=		libdrm:dev:std
			xorg-server:dev:std
BUILDRUN_DEPENDS=	libdrm:primary:std
			xorg-server:primary:std

USES=			mesa pkgconfig meson
XORG_COMPONENTS=	xorgproto
DISTNAME=		${ALTNAME}-${PORTVERSION}
MESON_ARGS=		-Dglamor=disabled

[UDEV].DESCRIPTION=			Use udev for autoconfiguration of input devices
[UDEV].BUILD_DEPENDS_ON=		libudev-devd:dev:std
[UDEV].BUILDRUN_DEPENDS_ON=		libudev-devd:primary:std
[UDEV].CONFIGURE_ARGS_ON=		-Dudev=enabled
[UDEV].CONFIGURE_ARGS_OFF=		-Dudev=disabled
