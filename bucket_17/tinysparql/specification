DEF[PORTVERSION]=	3.10.1
DEF[DL_FOLDER]=		${PORTVERSION:R}
DEF[SOVERSION]=		0.1001.0
# ----------------------------------------------------------------------------

NAMEBASE=		tinysparql
VERSION=		${PORTVERSION}
KEYWORDS=		databases
VARIANTS=		std
SDESC[std]=		Low-footprint RDF triple store (SPARQL 1.1)
HOMEPAGE=		https://gitlab.gnome.org/GNOME/tinysparql
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNOME/tinysparql/${DL_FOLDER}
DISTFILE[1]=		tinysparql-${PORTVERSION}.tar.xz:main

SPKGS[std]=		set primary dev nls man docs tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

FPC_EQUIVALENT=		devel/tinysparql

BUILD_DEPENDS=		vala:primary:std
			asciidoc:single:std
			dbus:dev:std
			libsoup:dev:std
			json-glib:dev:std
			python-PyGObject:dev:python_used
			icu:dev:std
BUILDRUN_DEPENDS=	dbus:primary:std
			libsoup:primary:std
			json-glib:primary:std
			python-snowballstemmer:single:python_used
			python-PyGObject:primary:python_used
			icu:primary:std

EXRUN[tools]=		primary
EXRUN[dev]=		glib:dev:std
			json-glib:dev:std
			libxml2:dev:std
			sqlite:dev:std

USES=			meson gettext pkgconfig sqlite python:build
GNOME_COMPONENTS=	glib introspection libxml2
MESON_ARGS=		-Dsystemd_user_services=false
			-Dintrospection=enabled
			-Dbash_completion=true
			-Dbash_completion_dir={{LOCALBASE}}/etc/bash_completion.d
			-Ddocs=true
			-Dman=true
			-Dvapi=enabled
			-Davahi=disabled
SOVERSION=		${SOVERSION}

post-install:
	${MV} ${STAGEDIR}${PREFIX}/share/doc/Tsparql-3.0 ${STAGEDIR}${STD_DOCDIR}
