DEF[PORTVERSION]=	2.1.2
# ----------------------------------------------------------------------------

NAMEBASE=		warsow
VERSION=		${PORTVERSION}
KEYWORDS=		games
VARIANTS=		standard
SDESC[standard]=	Futuristic, fast-paced first person shooter
HOMEPAGE=		https://warsow.net/
CONTACT=		Leonid_Bobrov[mazocomp@disroot.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/OrangeGrayCyan:warsow:${PORTVERSION}-source
DISTFILE[1]=		generated:main

SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

LICENSE=		GPLv2+:single
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/source/gnu.txt
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_AWK=		TERMS:"^\#"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/source/cgame/ref.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		games/warsow

USES=			c++:single cmake
CMAKE_SOURCE_PATH=	{{WRKSRC}}/source
BUILD_DEPENDS=		openal:single:standard
			zlib:static:standard
RUN_DEPENDS=		warsow-data:single:standard
BUILDRUN_DEPENDS=	curl:primary:standard
			freetype:primary:standard
			jpeg-turbo:primary:standard
			libtheora:single:standard
			libvorbis:primary:standard
			png:single:standard
			sdl2:single:standard
			zlib:shared:standard
INSTALL_WRKSRC=		{{WRKSRC}}/source/build

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/warsow
	${CP} -R ${INSTALL_WRKSRC}/basewsw ${STAGEDIR}${PREFIX}/share/warsow/
	${CP} -R ${INSTALL_WRKSRC}/libs ${STAGEDIR}${PREFIX}/share/warsow/
	${INSTALL_PROGRAM} ${INSTALL_WRKSRC}/w* ${STAGEDIR}${PREFIX}/bin
