# manually maintained
DEF[PORTVERSION]=	4.2.0
# ------------------------------------------------------------------------

NAMEBASE=		python-cmake
VERSION=		${PORTVERSION}
KEYWORDS=		python
VARIANTS=		v14 v13
SDESC[v14]=		Wrapper for the cmake software builder (3.14)
SDESC[v13]=		Wrapper for the cmake software builder (3.13)
HOMEPAGE=		https://cmake.org
CONTACT=		Python_Automaton[python@ironwolf.systems]

DOWNLOAD_GROUPS=	none

SPKGS[v14]=		single
SPKGS[v13]=		single

OPTIONS_AVAILABLE=	PY314 PY313
OPTIONS_STANDARD=	none
VOPTS[v14]=		PY314=ON PY313=OFF
VOPTS[v13]=		PY314=OFF PY313=ON

GENERATED=		yes

RUN_DEPENDS=		cmake:primary:std

[PY314].USES_ON=			python:v14,pep517
[PY314].BUILD_DEPENDS_ON=		python-flit-core:single:v14
[PY313].USES_ON=			python:v13,pep517
[PY313].BUILD_DEPENDS_ON=		python-flit-core:single:v13

post-extract:
	${MKDIR} ${WRKSRC}/cmake
	${SED} -e "s|@version@|${PORTVERSION}|" ${FILESDIR}/pyproject.toml.in \
		> ${WRKSRC}/pyproject.toml
	${SED} -e "s|@version@|${PORTVERSION}|; s|@CMAKE_BIN_DIR@|${PREFIX}/bin|" \
		${FILESDIR}/__init__.py.in > ${WRKSRC}/cmake/__init__.py
