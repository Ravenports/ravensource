--- Makefile.orig	2025-10-07 10:04:26 UTC
+++ Makefile
@@ -46,21 +46,7 @@
 # Supports building with make -f <gpr path>/Makefile from the build directory
 #
 
-HAS_REALPATH := $(shell command -v realpath >/dev/null 2>&1 && echo yes || echo no)
-
-# as Makefile is in the root dir, SOURCE_DIR is just dirname of the Makefile
-# path above.
-ifeq ($(HAS_REALPATH),yes)
-# first let's check if Makefile is symlinked: realpath will return the actual
-# (after link resolution) relative path of the Makefile from PWD.
-# On macOS, the `realpath` command does not support the `--relative-to` option.
-# To handle this, you can specify the Makefile explicitly by calling:
-# make MFILE="./Makefile"
-	MFILE      := $(shell realpath --relative-to=. "$(firstword ${MAKEFILE_LIST})"))
-	SOURCE_DIR := $(shell dirname "${MFILE}")
-else
-	SOURCE_DIR := $(shell dirname $(dir ${MAKEFILE_LIST}))
-endif
+SOURCE_DIR := $(shell dirname "$0")
 
 # Load current setup if any
 -include makefile.setup
@@ -138,7 +124,7 @@ GPR_OPTIONS := -XGPR2_BUILD=${GPR2_BUILD
 BUILDER     := gprbuild -p -j${PROCESSORS} ${GPR_OPTIONS} \
                ${GPRBUILD_OPTIONS} -XPROFILER=${PROFILER} \
                ${COVERAGE_BUILD_FLAGS}
-INSTALLER   := gprinstall -p -f ${GPR_OPTIONS} --prefix='${prefix}'
+INSTALLER   := gprinstall -p -f ${GPR_OPTIONS} --prefix='${prefix}' --no-manifests
 CLEANER     := gprclean -eL -p ${RBD} -XGPR2_BUILD=${GPR2_BUILD} \
                -XBUILD_ROOT="${CURDIR}/${BUILD_ROOT}"
 UNINSTALLER := ${INSTALLER} -p -f --uninstall
