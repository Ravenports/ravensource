--- gprconfig_kbase/db/linker.xml.orig	2025-09-18 21:21:22 UTC
+++ gprconfig_kbase/db/linker.xml
@@ -1227,6 +1227,7 @@
        <target name="^.*openbsd.*$" />
        <target name="^.*netbsd.*$" />
        <target name="^.*dragonfly.*$" />
+       <target name="^.*midnightbsd.*$" />
        <target name="^.*-fastos.*$" />
        <target name="^.*qnx[0-9]*$" />
     </targets>
@@ -1299,6 +1300,7 @@
        <target name="^.*openbsd.*$" />
        <target name="^.*netbsd.*$" />
        <target name="^.*dragonfly.*$" />
+       <target name="^.*midnightbsd.*$" />
     </targets>
     <config>
    for Run_Path_Option  use ("-Wl,-z,origin,-rpath,");
@@ -1334,13 +1336,34 @@
     </config>
   </configuration>
 
+  <!-- linux and bsd -->
+  <configuration>
+    <compilers>
+       <compiler language="Ada" />
+    </compilers>
+    <targets>
+       <target name="^.*freebsd.*$" />
+       <target name="^.*dragonfly.*$" />
+       <target name="^.*openbsd.*$" />
+       <target name="^.*netbsd.*$" />
+       <target name="^.*midnightbsd.*$" />
+       <target name="^.*linux.*$" />
+    </targets>
+    <config>
+   package Linker is
+      for Required_Switches use
+        Linker'Required_Switches
+        &amp; ("-Wl,-rpath,${RUNTIME_DIR(ada)}adalib");
+   end Linker;
+    </config>
+  </configuration>
+
   <!-- Cross linux, QNX: add rpath-link to the runtime -->
   <configuration>
     <compilers>
        <compiler language="Ada" />
     </compilers>
      <targets>
-       <target name="^.*-linux.*$" />
        <target name="^.*-fastos.*$" />
        <target name="^.*-qnx[0-9]*"/>
      </targets>
@@ -1409,6 +1432,11 @@
        <target name="^.*qnx[0-9]*$" />
        <target name="darwin" />
        <target name="mingw" />
+       <target name="^.*freebsd.*$" />
+       <target name="^.*dragonfly.*$" />
+       <target name="^.*openbsd.*$" />
+       <target name="^.*netbsd.*$" />
+       <target name="^.*midnightbsd.*$" />
     </targets>
     <config>
    for Library_Partial_Linker use
@@ -1888,6 +1916,7 @@
        <target name="^.*openbsd.*$" />
        <target name="^.*netbsd.*$" />
        <target name="^.*dragonfly.*$" />
+       <target name="^.*midnightbsd.*$" />
        <target name="^.*-qnx[0-9]*"/>
      </targets>
     <config>
@@ -1942,6 +1971,7 @@
        <target name="^.*openbsd.*$" />
        <target name="^.*netbsd.*$" />
        <target name="^.*dragonfly.*$" />
+       <target name="^.*midnightbsd.*$" />
      </targets>
     <config>
    package Linker is
